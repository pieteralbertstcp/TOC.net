@{
    ViewBag.Title = "Index";
    Layout = "~/MasterTemplate/AuthentucatedMasterTemplate.cshtml";
}
<script type="text/javascript">

    function updateMapWithMemberDetails(memberId) {
        if (memberId != null) {
            showMap();
            removeAllMarkersFromMap();
            getMemberData(memberId);
        }
    }
    function getMarkerData() {
        hideMap();
    };

    function getMemberData(memberId) {
        $.ajax({
            type: "GET",
            dataType: "json",
            url: '@Url.Action("GetMemberData", "members")',
            data: { "memberId": memberId },
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                if (data != null) {
                    showMemberDetails(GenerateMemberDetailsTable(data.body.first_name + " " + data.body.last_name, data.body.address, '2016', data.body.email, data.body.cell, ""));
                    AddMapMarkers(data.body.first_name + " " + data.body.last_name, data.body.lat, data.body.lng, map, "F7A923");
                    var pt = new google.maps.LatLng(data.body.lng, data.body.lat);
                    map.setCenter(pt);
                    map.setZoom(14);
                }
            },
            error: function (xhr, status, error) {
                console.log(error);
            }
        });
    }

    function GenerateMemberDetailsTable(nameSurname, address, startedWoodworkingAtYear, email, cell, image) {
        return '<style>table, th, td {border: 1px solid black; padding: 5px;}</style><table width="100%"> <tr> <th style="background-color:#F7A923; font-weight: bold;text-align:center;" colspan="3">' +
            'Member Details</th> </tr> <tr> <td style=" font-weight: bold;">Name</td> <td>' + nameSurname + '</td> <td rowspan="5">' +
            '<img src="' + image + '" style="width:150px;padding:2px; "></td> </tr> <tr> <td style=" font-weight: bold;">Cell</td>' +
            ' <td>' + cell + '</td> </tr> <tr> <td style=" font-weight: bold;">email</td> <td>' + email + '</td> </tr> <tr>' +
            ' <td style=" font-weight: bold;">Started doing<br>woodworking</td> <td>' + startedWoodworkingAtYear + '</td> </tr> <tr> <td style=" font-weight: bold;">Address</td> ' +
            '<td>' + address + '</td> </tr> </table>';
    }

    function showMemberDetails(memberHtmlData) {
        $('#MemberDetailsDiv').empty();
        $('#MemberDetailsDiv').html(memberHtmlData);
    }
</script>
<h3>Club Members</h3>
Please select a member from the below list to view their details.<br><br>
<select onchange="updateMapWithMemberDetails($(this).val())">
    @foreach (var x in ViewBag.Members)
    {
        <option value="@x.id">@(x.first_name + " " + x.last_name)</option>
        <option value="@x.id">@(x.first_name + " " + x.last_name)</option>
    }
</select>
<br><br><div id="MemberDetailsDiv"></div>
<br>
@Html.Partial("~/Views/Partials/GoogleMap.cshtml") 